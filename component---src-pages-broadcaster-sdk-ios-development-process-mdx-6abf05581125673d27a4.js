"use strict";(self.webpackChunkexample=self.webpackChunkexample||[]).push([[6947],{68430:function(e,a,t){t.r(a),t.d(a,{_frontmatter:function(){return l},default:function(){return u}});var n,o=t(63366),r=(t(67294),t(64983)),i=t(56928),s=["components"],l={},c=(n="InlineNotification",function(e){return console.warn("Component "+n+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",e)}),d={_frontmatter:l},p=i.Z;function u(e){var a=e.components,t=(0,o.Z)(e,s);return(0,r.kt)(p,Object.assign({},d,t,{components:a,mdxType:"MDXLayout"}),(0,r.kt)(c,{kind:"warning",mdxType:"InlineNotification"},(0,r.kt)("p",null,"Please note that as of November 1st, 2022 IBM has discontinued support for the Video Streaming Broadcaster SDK. It will not receive updates or technical support and may not fully function. For SDKs you have already downloaded, please do not use them to build applications to access the broadcasting functionality, and delete them from your archives. You may find information on alternative methods to broadcast live video to your channel on our ",(0,r.kt)("a",{parentName:"p",href:"https://support.video.ibm.com/hc/en-us/categories/200545448-Broadcasting-on-IBM-Watson-Media"},"Support Center"),".")),(0,r.kt)("h2",null,"Step 1: Download SDK package"),(0,r.kt)("p",null,"Request an SDK package from your Customer Success representative."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"If you’re using the EU cluster you can create your access on the dashboard of the EU cluster. To download the SDK package please ",(0,r.kt)("a",{parentName:"li",href:"https://video.ibm.com/enterprise-video/contact"},"contact us"),". *")),(0,r.kt)("h2",null,"Step 2: Explore the SDK package"),(0,r.kt)("p",null,"The provided zip archive contains the binary framework and a sample application."),(0,r.kt)("h2",null,"Step 3: Create (or open) your project"),(0,r.kt)("p",null,"Open the project that you would like to integrate the SDK in."),(0,r.kt)("h2",null,"Step 4: Add the SDK to the project"),(0,r.kt)("h3",null,"Add the framework"),(0,r.kt)("p",null,"Drag ",(0,r.kt)("inlineCode",{parentName:"p"},"IBMWatsonMediaBroadcasterSDK.xcframework")," into the Embedded Binaries section of your target."),(0,r.kt)("h2",null,"Step 5: Setting up a Broadcaster"),(0,r.kt)("p",null,"Setting up a broadcaster session in your app can be done in a few easy steps. The main component you instantiate is a ",(0,r.kt)("inlineCode",{parentName:"p"},"IBMWatsonMediaBroadcaster"),". This class is responsible for the whole broadcast session - that is making connection with the broadcaster server, gathering the audio and video data through an object implementing the ",(0,r.kt)("inlineCode",{parentName:"p"},"IBMWatsonMediaFrameSource")," protocol, present a preview of the captured frames using a class implementing ",(0,r.kt)("inlineCode",{parentName:"p"},"IBMWatsonMediaPreviewPresenter"),". For optimal performance a broadcaster configuration object has to be passed when you initialize the broadcaster. ",(0,r.kt)("inlineCode",{parentName:"p"},"IBMWatsonMediaBroadcasterConfig")," has presets for different video resolutions."),(0,r.kt)("p",null,"For example:"),(0,r.kt)("h4",null,"Objective-C"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-objc"},"@import IBMWatsonMediaBroadcasterSDK\n\n[IBMWatsonMediaBroadcaster configureWithRegionalCluster:IBMWatsonMediaRegionalClusterWorldWide];\n\nself.frameSource = [IBMWatsonMediaCaptureSessionFrameSource new];\nself.broadcastPreview = [[IBMWatsonMediaBroadcasterPreview alloc] initWithFrame:self.view.bounds];\nself.broadcasterConfig = [IBMWatsonMediaBroadcasterConfig configWithPreset:IBMWatsonMediaVideoPreset720];\nself.broadcaster = [[IBMWatsonMediaBroadcaster alloc] initWithFrameSource:self.frameSource config:self.broadcasterConfig];\nself.broadcaster.presenter = self.broadcastPreview;\n[self.broadcaster addListener:self];\n")),(0,r.kt)("h4",null,"Swift"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-swift"},"import IBMWatsonMediaBroadcasterSDK\n\nIBMWatsonMediaBroadcaster.configure(withRegionalCluster: .worldWide)\n\nframeSource = IBMWatsonMediaCaptureSessionFrameSource()\nbroadcastPreview = IBMWatsonMediaBroadcasterPreview(frame: view.bounds)\nbroadcasterConfig = IBMWatsonMediaBroadcasterConfig(preset: .preset720)\nbroadcaster = IBMWatsonMediaBroadcaster(frameSource: frameSource, config: broadcasterConfig)\nbroadcaster.presenter = broadcastPreview\nbroadcaster.addListener(self)\n")),(0,r.kt)("p",null,"For using the default camera and microphone you have to provide the following keys in your application’s info.plist file:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"NSCameraUsageDescription")," - Short string describing how your app uses the camera."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"NSMicrophoneUsageDescription")," - Short string describing how your app uses the microphone.")),(0,r.kt)("h2",null,"Step 6: Broadcaster user interface"),(0,r.kt)("p",null,"The IBM Video Streaming SDK doesn’t provide any user interface besides the captured preview. To help get started with building your own UI, you can find basic UI implementations in the sample apps."),(0,r.kt)("h2",null,"Step 7: Setup a frame source"),(0,r.kt)("p",null,"By now you have configured your broadcaster and it is ready to receive audio and video frames from its frame source. The IBM Video Streaming SDK offers several ",(0,r.kt)("inlineCode",{parentName:"p"},"IBMWatsonMediaFrameSource")," implementations:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"IBMWatsonMediaCaptureSessionFrameSource")," can use the cameras and microphones of your device and capture audio and video frames to be broadcasted.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"IBMWatsonMediaAssetFrameSource")," can be used to broadcast prerecorded media or inject a video into a live broadcast.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"IBMWatsonMediaScreenCaptureFrameSource")," makes possible to broadcast the content of a screen.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"IBMWatsonMediaCompositeFrameSource")," allos to combine several farme sources for effects like picture in picture."))),(0,r.kt)("p",null,"For more detailed information see the reference documentation."),(0,r.kt)("p",null,"In order to access a capture device (camera or microphone) you may need to get permissions from the end user.\n",(0,r.kt)("inlineCode",{parentName:"p"},"IBMWatsonMediaCaptureSessionFrameSource")," has a built-in feature to detect if the host app has adequate access privileges to use the on-device microphones and cameras:"),(0,r.kt)("h4",null,"Objective-C"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-objc"},"[frameSource requestPermissionIfNeeded:^(BOOL authorized) {\n    if (authorized) {\n        [self.broadcaster startCaptureWithCompletion:^(NSError * _Nullable error) {\n            //setup capture device related UI, etc.\n        }];\n    } else {\n        [self showAccessDeniedAlert];\n    }\n}];\n")),(0,r.kt)("h4",null,"Swift"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-swift"},"frameSource.requestPermissionIfNeeded { isAuthorized in\n    if isAuthorized {\n        self.broadcaster.startCapture { error in\n            //setup capture device related UI, etc.\n        }\n    } else {\n        self.showAccessDeniedAlert()\n    }\n}\n")),(0,r.kt)("h2",null,"Step 8: Getting access to the broadcast server"),(0,r.kt)("p",null,"To start the actual broadcast session, you need a Channel ID to broadcast to, and an access token which authenticates your broadcast. Both can be obtained using IBM Video Streaming Channel API. For further details, please refer the ",(0,r.kt)("a",{parentName:"p",href:"https://developers.video.ibm.com/channel-api/getting-started.html"},"Channel API Documentation"),", and see a working example using the API in our sample app. Once you obtained the Channel ID and the access token you can use them to start the actual broadcast:"),(0,r.kt)("h4",null,"Objective-C"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-objc"},"[self.broadcaster startBroadcastWithChannelID:<#channelID#> accessToken:<#accessToken#>];\n")),(0,r.kt)("h4",null,"Swift"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-swift"},"broadcaster.startBroadcast(withChannelID: <#channelID#>, accessToken: <#accessToken#>)\n")),(0,r.kt)("h2",null,"Step 9: Handle broadcaster callbacks"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"IBMWatsonMediaBroadcaster")," uses ",(0,r.kt)("inlineCode",{parentName:"p"},"IBMWatsonMediaBroadcasterDelegate")," protocol to inform its delegate about certain events, state changes and statistical data about the broadcast session."),(0,r.kt)("h3",null,"State change callbacks"),(0,r.kt)("p",null,"Use ",(0,r.kt)("inlineCode",{parentName:"p"},"broadcasterDidStart:")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"broadcasterDidStop:")," to update your user interface when broadcast session starts and ends. Also you can monitor the actual state of your ongoing broadcast session listening to ",(0,r.kt)("inlineCode",{parentName:"p"},"broadcaster:didChangeState:"),". This callback tells you if the connection is established, the broadcast is running or there is still data to be flushed before the broadcast is stopped completely."),(0,r.kt)("p",null,"If broadcaster fails for some reason, ",(0,r.kt)("inlineCode",{parentName:"p"},"broadcaster:didFailWithError:")," is called. You can use its ",(0,r.kt)("inlineCode",{parentName:"p"},"error")," parameter to inspect the actual reason of failure."),(0,r.kt)("h3",null,"Transmition related callbacks"),(0,r.kt)("p",null,"Because video broadcast is sensitive to network condition changes, there are some callbacks which can be used to get information about the general quality of your broadcast session. You can monitor when the video encoder changes its preferred output bitrate with ",(0,r.kt)("inlineCode",{parentName:"p"},"broadcaster:didChangeVideoBitrate:oldBitrate:")," delegate method."),(0,r.kt)("p",null,"Also there is a callback which is called every second reporting statistics about the current session: ",(0,r.kt)("inlineCode",{parentName:"p"},"broadcaster:outputFrameRate:outputBandwidth:actualVideoBitrate:preferredVideoBitrate:bufferLoad:bufferLimit:")," delegate method."))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-broadcaster-sdk-ios-development-process-mdx-6abf05581125673d27a4.js.map