"use strict";(self.webpackChunkexample=self.webpackChunkexample||[]).push([[4987],{95120:function(e,t,a){a.r(t),a.d(t,{_frontmatter:function(){return c},default:function(){return h}});var n=a(63366),i=(a(67294),a(64983)),o=a(56928),r=["components"],c={},s=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,i.kt)("div",t)}},l=s("Row"),p=s("Column"),m=s("InlineNotification"),u={_frontmatter:c},d=o.Z;function h(e){var t=e.components,a=(0,n.Z)(e,r);return(0,i.kt)(d,Object.assign({},u,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",null,"Introduction"),(0,i.kt)("p",null,"Viewer Authentication API lets you implement a custom authentication process. This prevents live and recorded videos on your account from being accessed until the viewer authenticates.\nThe authentication process is based on JSON Web Token (",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc7519"},"JWT"),") standards (",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc7516"},"JWE")," and ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc7515"},"JWS"),")."),(0,i.kt)("h2",null,"Flow"),(0,i.kt)("p",null,"To implement viewer authentication flow you need to create an application that includes the following:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Screens your viewers need to go through to authenticate"),(0,i.kt)("li",{parentName:"ul"},"Backend code that validates these authentication requests"),(0,i.kt)("li",{parentName:"ul"},"The process to redirect back to / or embed IBM Video Streaming components (player, QnA, Chat) with authentication token")),(0,i.kt)("h3",null,"Embed with Token"),(0,i.kt)("p",null,"If you have protected pages where you want to use our embedded components, you can pass the authentication token directly to the embed URL in the vt query parameter."),(0,i.kt)(l,{className:"image-card-group",mdxType:"Row"},(0,i.kt)(p,{noGutterSm:!0,mdxType:"Column"},(0,i.kt)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",(0,i.kt)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"51.041666666666664%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABFElEQVQoz3WR3U7DMAxG+/6Pxy2Ii7HB2JqubRL/xXYg6TRtoH06shwrJ1LkwcxijPVJiAgA/s+XZVHVodaKiCml3ENEIlJK2S5Jj7vfm+4uImbWZCYKp/N0HsPpPIcpLWtaIyMVlqpWH837NNmkCBBnZCCIKcdEGTAmBjJRs+4/4t6GgxKv4wRzrGxVNrTV0hsuf3DqYKtDZYVpPe8OYX8M++P0+Z3DjJcI01IiOLBlcuAblbU9inKVK0qJIOtGlhW2Y9ekCSg38GOMrwc+hMplqKIaMY8zTis0FgjLJnTzgQqS3r4uL++0Gyvr4EVLJkdpUKuGfO1JDNiA+yflimhVVxJvsjsSPluGqt52fh9E/N3zD6kYSPJiX4dwAAAAAElFTkSuQmCC')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,i.kt)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"Viewer Authentication Flow - Embed with Token",title:"Viewer Authentication Flow - Embed with Token",src:"/static/3e656c6bca8c18ba1f4c79163088cb43/3cbba/viewer-auth-embed-with-token%402x.png",srcSet:["/static/3e656c6bca8c18ba1f4c79163088cb43/7fc1e/viewer-auth-embed-with-token%402x.png 288w","/static/3e656c6bca8c18ba1f4c79163088cb43/a5df1/viewer-auth-embed-with-token%402x.png 576w","/static/3e656c6bca8c18ba1f4c79163088cb43/3cbba/viewer-auth-embed-with-token%402x.png 1152w","/static/3e656c6bca8c18ba1f4c79163088cb43/0b124/viewer-auth-embed-with-token%402x.png 1728w","/static/3e656c6bca8c18ba1f4c79163088cb43/4ea69/viewer-auth-embed-with-token%402x.png 2304w","/static/3e656c6bca8c18ba1f4c79163088cb43/fdef4/viewer-auth-embed-with-token%402x.png 2336w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy",decoding:"async"}),"\n    "))),(0,i.kt)("h3",null,"Redirect Flow"),(0,i.kt)("p",null,"If you embed the player to an unprotected page or use IBM’s channel page, the player will redirect the viewer to your authentication endpoint. You need to redirect back to the ref URL (passed in query parameter) with authentication token in the vt query parameter."),(0,i.kt)(l,{className:"image-card-group",mdxType:"Row"},(0,i.kt)(p,{noGutterSm:!0,mdxType:"Column"},(0,i.kt)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",(0,i.kt)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"71.875%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAABj0lEQVQoz4WSi4rcMAxF8/8/1i8ohVJome08Mnnajm291TrpDNudQsVBmMhXKNfqVDWl5C8BANu2IWIp5bUaQhCRzt0RkZmJSESeZRGhR5jZe6WZIaKqNjETxTWEZU0hQi5QKgG66AfNazQxFVjHaR3nmnIKsW6ZKhiJadO3Fi+Yqpt1ApTGuYbkJM7qpHsWRzZgRzFgwx14gOztIJ0jlzkOp8v08zad++Vyz9MqW7VCmtEKWWUH+YvKltGAO0fxQhwLxUwhtxzzIdOMXlvreJ/SMO8s8T6XOWqGJt5noNbiPbAPVtv30E+3H2/96bzehm1c07DUJba+f8SVjtsfaP9cCceQpxWWdFDmAEvyQvYfcSUnXW7D6dv3/u0yXvrxfBuvPRVwkufY3EwmeaCOvLtNjsyx1DlyLM2kjHhdymmgfvXDMEm1zvE5GCxJN7CMR7ZmG1nZDxnj59Pw6Uv+enWUzkllAwgZw9ZyzBA2LWiVjtxkB5Ua+zrsLy+dquV/rT4zA4CqItFrNZf8e7d/ARhgMFNKkCGDAAAAAElFTkSuQmCC')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,i.kt)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"Viewer Authentication Flow - Embed with Token",title:"Viewer Authentication Flow - Embed with Token",src:"/static/f2108a41cdb090447c32a5816b5f28cf/3cbba/viewer-auth-redirect-flow%402x.png",srcSet:["/static/f2108a41cdb090447c32a5816b5f28cf/7fc1e/viewer-auth-redirect-flow%402x.png 288w","/static/f2108a41cdb090447c32a5816b5f28cf/a5df1/viewer-auth-redirect-flow%402x.png 576w","/static/f2108a41cdb090447c32a5816b5f28cf/3cbba/viewer-auth-redirect-flow%402x.png 1152w","/static/f2108a41cdb090447c32a5816b5f28cf/0b124/viewer-auth-redirect-flow%402x.png 1728w","/static/f2108a41cdb090447c32a5816b5f28cf/4ea69/viewer-auth-redirect-flow%402x.png 2304w","/static/f2108a41cdb090447c32a5816b5f28cf/fdef4/viewer-auth-redirect-flow%402x.png 2336w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy",decoding:"async"}),"\n    "))),(0,i.kt)("h2",null,"Viewer Authentication Settings"),(0,i.kt)("p",null,"You can enable viewer authentication via API."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Generate an RSA key pair with 2048 bits key size")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Set the public key and authentication URL to the content (channel or video) via API. ",(0,i.kt)("a",{parentName:"p",href:"/viewer-authentication-api-v2-settings-api#set-viewer-authentication-parameters-for-a-channel"},"See more")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"and store the private key in your system secure way")),(0,i.kt)(m,{kind:"warning",mdxType:"InlineNotification"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Do not share private keys with us or anybody"))))),(0,i.kt)("p",null,"We recommend using different key pairs for every content."),(0,i.kt)("p",null,"By default, every video inherits these settings from the channel but if you want to use different authentication for a video you can set it. ",(0,i.kt)("a",{parentName:"p",href:"/viewer-authentication-api-v2-settings-api#set-viewer-authentication-for-a-video"},"See more")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example to key generation:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'ssh-keygen -t rsa -b 2048 -E SHA512 -m PEM -P "" -f content_1234567.key\nopenssl rsa -in content_1234567.key -pubout -outform PEM -out content_1234567.key.pub\n')),(0,i.kt)("h2",null,"Viewer Authentication Token"),(0,i.kt)("p",null,"Viewer Authentication Token token is an encrypted JWT (JWE) that contains a signed JWT (JWS) with the following mandatory claims:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"sub: Subject, the token subject (identifier of the viewer, we recommend e-mail address)"),(0,i.kt)("li",{parentName:"ul"},"iat: Issued at, Unix timestamp in seconds when the token was generated. We will accept the token in the next 60 seconds from this timestamp. (We don’t accept tokens with future issued at timestamps)")),(0,i.kt)("p",null,"The JWS is signed with your private key that you set to the content. The JWE is encrypted with Watson Media’s public key that you can get from the API. ",(0,i.kt)("a",{parentName:"p",href:"/viewer-authentication-api-v2-settings-api#get-ibm-video-streaming-public-key"},"See more")),(0,i.kt)("h3",null,"Viewer Authentication Token Lifecycle"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"You can use the same token for the different components (Player, Chat, QnA)"),(0,i.kt)("li",{parentName:"ul"},"You can use every token once for a component: when the component embeds reloaded (eg: viewer reload the page) you need to generate a new token."),(0,i.kt)("li",{parentName:"ul"},"The token lifetime is 60 seconds after issued")),(0,i.kt)("h3",null,"Token generation method"),(0,i.kt)(l,{className:"image-card-group",mdxType:"Row"},(0,i.kt)(p,{colMd:12,colLg:10,colXl:8,colMax:8,noGutterSm:!0,mdxType:"Column"},(0,i.kt)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",(0,i.kt)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"175%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAjCAIAAAAblL1PAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC+UlEQVRIx42V2ZKrOBBE/f9fOBH9YBuLRUIgQGgXYgKl0aV9pzvmPDjYEqSqrPRt3/cYozFmXVellLVWa20yOuOc23/gtofojO0zbdsyxrquY4zxzDiOUsofxSls+5ZCCN57KaVSyhjjnAshpJT2X7klF4J1WKjLWGuxbKWU1npdV+99EVzfeNvjpuR6f9wJIY/H45l5vV7P5/N+v+O367qr/rrnzVvHOR+GoT/hnAshcAWb7/sep4wx/Drnji87Y9tM0zQ46E4opW3b1nXddR0eoJTilvf+tsdktG6y4CpumoYQ0mTqk3K3bdu32GpT1zUebdsWS0XDKKXQUErxou9iF7yxfBiw7WmatNZSSnjGGPNbq/aY1LKiwlVVvTJVVaHsjLHfxUe1+7OelNJpmmKMzjnvvXMObi2eBejce8/YcNd1pbCl4CgS9i+EsNYqpd7iFOJhzxiLDbZtizFumXKQUtouFG8fYszWsizTNC3LYjNYof0OLsKkf8QpJa31OI5CiGVZ5hO87uOKtXbbtrcYZtdaP5/PqqoIIeh8lSEX0A5CiNb6m9gYU3za9z2llBACe8Ck8AmqaK39FDdNgzyglGIAaIZlYDtY8HDYKU4pJWMM+iylXJbFX0BaXE9TSoc4xe1jyv8nR4ZF79ESxMh/zv0PMWSDXTVGvtjzwxKFdHJ+2UevrZgmMY6YKn4yZvq+F0JQSrXWfy3bBa/NKMQ8zzBDKZjMwBi4Ps+zlHIcR7zoGIx1Wf7JfH194WtCiDEvZBgGXBnywONW3/fzPL9H0hl79JEy5BM9QWPhFvwN4AHGGCEEAZiM0iUDHo9H8SZAQmBmi2dfr9c7Pa0x7KRtW845bASTFZ+V0KWUcs5DCMeXtVLVq4J1S2KWPLxGJw6woj/p2eQbGAksu0wIYvgjleu6hvgz9JE+jDFEfClbmQokcV52/rtBD9AP9AmnKMQ1G5VSSOUjDHYXvTbDOKCZUALO+d+u+u6wfd/iVpK1pBTiNoTwi/hfoxbDC1QP89AAAAAASUVORK5CYII=')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,i.kt)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"Viewer Authentication Flow - Embed with Token",title:"Viewer Authentication Flow - Embed with Token",src:"/static/63587484a5a7999fe91b22e4bbc61724/3cbba/viewer-auth-token-generation%402x.png",srcSet:["/static/63587484a5a7999fe91b22e4bbc61724/7fc1e/viewer-auth-token-generation%402x.png 288w","/static/63587484a5a7999fe91b22e4bbc61724/a5df1/viewer-auth-token-generation%402x.png 576w","/static/63587484a5a7999fe91b22e4bbc61724/3cbba/viewer-auth-token-generation%402x.png 1152w","/static/63587484a5a7999fe91b22e4bbc61724/192f4/viewer-auth-token-generation%402x.png 1536w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy",decoding:"async"}),"\n    "))))}h.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-viewer-authentication-api-v-2-getting-started-mdx-a19c7d0bb4bf604c4ab8.js.map